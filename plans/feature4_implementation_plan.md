# Feature 4: Act Phase (Workout Planning) Implementation Plan

## Goal
Create a personalized 1-week workout plan for the user based on their selected path (Lean/Athletic/Muscle) using Caroline Girvan's YouTube videos as the content source.

## Architecture: RAG (Retrieval-Augmented Generation)

To generate a valid weekly plan, we will use a RAG approach:
1.  **Ingestion**: Store workout metadata and "Embeddings" (vector representations of the workout content) in Firestore.
2.  **Retrieval**: When generating a plan, fetch relevant workouts based on the user's goal.
3.  **Generation**: Use the AI to assemble these retrieved workouts into a coherent weekly schedule (Day 1, Day 2, Rest, etc.).

## Step 1: Data Ingestion (The "Knowledge Base")
We need a database of workouts.
- **Collection**: `workout_library`
- **Schema**:
  ```json
  {
    "id": "youtube_id",
    "title": "20 MIN FULL BODY WORKOUT",
    "trainer": "Caroline Girvan",
    "url": "https://www.youtube.com/watch?v=...",
    "duration_mins": 20,
    "difficulty": "Intermediate",
    "focus": ["Full Body", "Strength", "Dumbbells"],
    "description": "...",
    "embedding": [0.1, -0.2, ...] // Generated by Gemini text-embedding-004
  }
  ```
- **Seeding**: Create a script `backend/scripts/seed_workouts.py` to populate this with a curated list of Caroline Girvan videos.

## Step 2: AI Service Updates
- Add `generate_embedding(text)` function to `backend/services/ai_service.py` using `models.embed_content`.
- Add `generate_weekly_plan(user_profile, available_workouts)` function.

## Step 3: API Endpoints (`/act`)
- `POST /act/generate-plan`:
    1.  Get user's selected path (Lean/Athletic/Muscle).
    2.  Fetch all workouts from `workout_library`.
    3.  (Optional Optimization) Perform cosine similarity search if the library is large. For now, fetch all (small dataset) and let AI pick.
    4.  Send User Profile + List of Workouts to AI.
    5.  AI returns a JSON schedule.
    6.  Save schedule to `user_progress/{uid}/plan`.

## Step 4: Frontend (`/act` page)
- Display the generated 7-day plan.
- Each day shows the video title, thumbnail (from YouTube ID), and status (Completed/Pending).

## Next Steps for User
1.  Review this plan.
2.  Run the seeding script.
3.  Implement the Act page.
